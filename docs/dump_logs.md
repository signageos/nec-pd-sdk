# How to dump logs from a device

Sometimes it's necessary to diagnose a problem on a device.
It might be handy to read logs and other files generated by the device.

## How it works

The basic steps:
1. Generate GPG public/private key pair for the device
2. Generate GPG public/private key pair for you
3. Create a .tar.gz archive that contains device's private key and your public key
4. Place the archive on a flash drive
5. Insert the flash drive into the device and wait a few moments
6. Insert the flash drive back into your computer. It should contain an archive with all the logs

## Step-by-step instructions

### Generate Your own GPG key pair

```
gpg --gen-key
```

And follow the prompts. E-mail has to be **dev@signageos.io**.


### Generate GPG key pair for the device

```
gpg --gen-key
```

In this case you can pick any e-mail address you want. It's irrelevant.
The only requirement is that you **leave the passphrase empty**.

### Export keys into an archive

Let's say that you generated the device key with e-mail _device@example.com_.

Then this is how you export them:

```
gpg --export --armor dev@signageos.io > recipient_public.pgp
gpg --export-secret-keys -a device@example.com > own_private.pgp
```

This exports your public key (you're the recipient) and device's private key.

Then, create the archive:

```
tar -czf dumplogs.tar.gz recipient_public.pgp own_private.pgp
```

### Dump logs

All that's left to do now is to move _dumplogs.tar.gz_ to the root path of a flash drive and insert it into a running device.

A loader animation should flash on the screen for the duration of the dumping process. Once the loader disappears, you can remove the flash drive.

### Decrypt the logs and read them

Re-insert the flash drive into your computer. It will contain a file _logs.tar.gz.gpg_.
This is the archive that contains all the files and it's encrypted using the keys you provided.

To decrypt it:

```
gpg logs.tar.gz.gpg
```
