#!/sbin/openrc-run

name=$RC_SVCNAME
description="Perform factory reset"
command="/sbin/signageos-factoryreset"

depend() {
    need localmount
}

start() {
    ebegin "perform factory reset"
    start-stop-daemon --start \
        --stdout-logger "/bin/sh -c '/usr/bin/logger --tag $name -p local0.info'" \
        --stderr-logger "/bin/sh -c '/usr/bin/logger --tag $name -p local0.err'" \
        --background \
        $command
    eend $? "factory reset failed"
}

stop() {
    ebegin "stop factory reset"
    # do nothing, but this has to be there because system will call "stop" on this service when switching runlevels
    eend 0
}
